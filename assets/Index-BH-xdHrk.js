import{d as F,r as N,a as B,c as P,b as V,F as H,e as R,u as w,n as T,o as b,f as q,t as D,_ as S,g as C,h as L}from"./index-C5_toUPd.js";class g{constructor(){this.stack=null,this.anm=null,this.running=!1,this.stack=[]}}function Y(t){const{name:e,callback:s,args:l,id:o=null}=t;this.stack.push({id:o,name:e,args:l,callback:s}),this.$eventBegin()}function j(t){if(typeof t=="string"||typeof t=="number"){const o=this.stack.findIndex(f=>f.id==t);this.stack.splice(o,1),this.stack.length||this.eventEnd();return}const{name:e,id:s=null}=t,l=this.stack.findIndex(o=>s?o.id==s:o.name==e);this.stack.splice(l,1)}function z(){this.stack.length&&(this.stack.forEach(t=>{t.callback(t.args)}),this.running&&window.requestAnimationFrame(this.$run.bind(this)))}function G(){this.running||(this.running=!0,this.anm=window.requestAnimationFrame(this.$run.bind(this)))}function O(){this.running&&(this.running=!1,window.cancelAnimationFrame(this.anm),this.anm=null)}g.prototype.$register=Y;g.prototype.$writeoff=j;g.prototype.$run=z;g.prototype.$eventBegin=G;g.prototype.$eventEnd=O;const X=new g,E=({width:t,height:e})=>{t=t||500,e=e||309;const s=document.createElement("canvas"),l=s.getContext("2d");return s.width=t,s.height=e,{canvas:s,context:l}},c=function(t,e){if(arguments.length<2&&(e=t,t=0),t>e){var s=e;e=t,t=s}return Math.floor(Math.random()*(e-t+1))+t},J=t=>typeof HTMLElement=="function"?t instanceof HTMLElement:t&&typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string",K=t=>{const e=document.querySelectorAll(t);return e.length===1?e[0]:e};Array.prototype.lastItem=function(){return this[this.length-1]};Array.prototype.firstItem=function(){return this[0]};const I=function(t){const e=t?"#fff62b":"#8cd629",s=10;let l=s,o=s;const f=s*2,h=s*2,{canvas:n,context:a}=E({width:f,height:h});let i=a.createRadialGradient(s,s,0,s,s,s);return i.addColorStop(.025,"#fff"),i.addColorStop(.2,"#fff"),i.addColorStop(.3,`${e}`),i.addColorStop(.5,`${e}cc`),i.addColorStop(.6,`${e}99`),i.addColorStop(.7,`${e}66`),i.addColorStop(.8,`${e}33`),i.addColorStop(1,"transparent"),a.arc(l,o,s,0,Math.PI*2),a.fillStyle=i,a.fill(),n};class _{constructor(e){this.context=null,this.canvas=null,this.creating=!1,this.fireflies=[],this.fireflyImg=[],this.maxPoi={x:0,y:0},this.startPoi={x:0,y:0},this.count=0,this.smoothCount=50;const{el:s,count:l=50,ex:o=2e3,ey:f=100,sx:h,sy:n,success:a}=e;this.startPoi={x:h,y:n},this.maxPoi={x:o,y:f};let i=J(e.el)?s:K(s);const{canvas:r,context:p}=E({width:o,height:f});this.canvas=r,this.context=p,i.appendChild(r);const u=I(0),y=I(1);this.fireflyImg.push(u,y),this.increasedCells(l),typeof a=="function"&&a()}}const Q=function(){let t=!1,e=this.startPoi.x,s=[],l=0,o=c(0,1);for(;e<this.maxPoi.x;){const f=c(1,100)<20;let h=c(100,150),n=[];if(!t)t=!0,n.push({x:this.startPoi.x,y:this.startPoi.y});else{const a=s.lastItem().lastItem();n.push({x:a.x,y:a.y})}if(f){const a=this.maxPoi.y,i=n.firstItem();let r=i.x+c(a/2,a),p=i.y+c(-(a*2/5),-(a*4/5)),u=i.x+c(a/2,a),y=i.y+c(-(a*2/5),-(a*4/5)),m=i.x,x=i.y;if(!o){let $=r,k=p;r=u,p=y,u=$,y=k}n.push({x:r,y:p},{x:u,y},{x:m,y:x})}else{const a=n.firstItem(),i=this.maxPoi.y;let r=a.x+h/6+l*c(75,125)/4,p=o?c(-i/10,i/10*4):c(i/10*4,i/10*9),u=r+h/3+l*c(75,125)/4,y=o?c(-i/10,i/10*4):c(i/10*4,i/10*9),m=u+h/2+l*c(75,125)/4,x=c(i/10*3,i/2);n.push({x:r,y:p},{x:u,y},{x:m,y:x}),o=!o}e=n.lastItem().x,s.push(n)}return s},U=function(){const t=c(3,7),e=this.fireflyImg[c(0,1)],s=this.startPoi,l=0,o=c(312.5,625),f=1/o,h=0,n=c(2,10)/10,a=c(2,6)/500,i=this.createPath(),r={radius:t,colorimg:e,nextPoi:s,t:l,vt:f,nextFrame:0,frameNumber:o,pathNumber:h,alpha:n,flashV:a,paths:i,symbol:-1};this.fireflies.push(r)},W=function(t){if(this.creating)return;let e=0;this.creating=!0;const s=setInterval(()=>{e<t?(e++,this.createFirefly()):(clearInterval(s),this.creating=!1,console.log(this.fireflies))},1e3/5)},Z=function(t,e){let{paths:s,frameNumber:l,nextFrame:o,vt:f,pathNumber:h,t:n,radius:a,colorimg:i,alpha:r,flashV:p,symbol:u}=t;const y=s[h],[m,x,$,k]=y,d=Math.pow;let M=m.x*d(1-n,3)+3*x.x*n*d(1-n,2)+3*$.x*d(n,2)*(1-n)+k.x*d(n,3),A=m.y*d(1-n,3)+3*x.y*n*d(1-n,2)+3*$.y*d(n,2)*(1-n)+k.y*d(n,3);const v=this.context;if(v.save(),v.beginPath(),v.globalAlpha=r,v.drawImage(i,M-a,A-a,a*2,a*2),v.restore(),n+=f,r+=p*u,o+=1,r>1&&(r=1,u=-1),r<.2&&(r=.2,u=1),o>=l&&(h++,n=0,o=0,h==s.length-1)){this.fireflies.splice(e,1);return}t.t=n,t.alpha=r,t.nextFrame=o,t.pathNumber=h,t.symbol=u,t.alpha=r},tt=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.fireflies.forEach((t,e)=>{this.flyPath(t,e)})};_.prototype.increasedCells=W;_.prototype.createPath=Q;_.prototype.flying=tt;_.prototype.createFirefly=U;_.prototype.flyPath=Z;const et={class:"header-wrap"},st={class:"nav-list"},nt=["onClick"],it=F({__name:"Header",setup(t){const e=N(0),l=B([{name:"星月海",title:"星星啊，月亮啊，水啊",url:"/home",hasPage:!0,note:"光年之外，璀璨零光不可触及；桂光倒悬，此番人间共饮一轮",subtitle:"我比他们更明亮，只因我的心离你更近而已。 —— 你好"},{name:"流萤",title:"萤火虫诶！",hasPage:!1,note:"夜幕挂星，飞火流萤",clickFun:({x:f,y:h})=>{const n=new _({el:".header-wrap",sx:f,ex:1920,ey:80,sy:h,success:async()=>{await T(),n.canvas.style.position="absolute",n.canvas.style.left="0",n.canvas.style.top="0";const a=`firefly_${Math.random().toString(32).slice(-8)}`;X.$register({name:"firefly",id:a,callback:()=>{n.flying()}})}})},subtitle:"树上的蝉、塘里的莲、河里的鱼，鱼跑了，塘旱了，就连那个村也推平了。 —— 童趣"},{name:"狂猪日记",title:"来看看猪的白日梦~",clickFun:"openDiary",hasPage:!1,note:"我梦见我变成了猪，今后一边怀恋当猪的好，一边想着做人的妙，比较可笑。",subtitle:"猪不会上班，猪不会写字，猪的一生只有一小年，可猪的所有痛苦也只有那最后那一刀。 —— 谁才是猪"},{name:"动画",title:"哟呵~",hasPage:!0,url:"/other",note:"人的厚度来源于时间，人的宽度来源见识，希望我是、或者成为一个厚而重的人。",subtitle:"可是有人生来便拥有了财富，从而有了时间，而后有了见识。 —— 天赋异禀"}]),o=(f,h,n)=>{e.value=n,h.clickFun({x:f.clientX,y:f.clientY})};return(f,h)=>(b(),P("div",et,[V("div",st,[(b(!0),P(H,null,R(w(l),(n,a)=>(b(),P("div",{class:q(["item",w(e)===a?"active":""]),key:a,onClick:i=>o(i,n,a)},D(n.name),11,nt))),128))])]))}}),at=S(it,[["__scopeId","data-v-a2200290"]]),ot={},rt={class:"ly-main-page-main"};function ct(t,e){const s=L("RouterView");return b(),P("div",rt,[C(s)])}const lt=S(ot,[["render",ct]]),ht={class:"layout-wrap"},ut=F({__name:"Index",setup(t){return(e,s)=>(b(),P("div",ht,[C(w(at)),C(w(lt))]))}});export{ut as default};
